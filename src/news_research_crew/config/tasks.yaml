reuse_previous_news_task:
  description: >
    Before collecting fresh articles for {topic}, use retrieve_news to load recently stored articles
    from local SQLite database. If enough recent articles exist (at least 20), report them for reuse.
    Otherwise, indicate that fresh collection is required.
  expected_output: >
    A structured list of previously stored articles for {topic}, or a note that fresh collection is required.
  agent: storage_agent

collection_task:
  description: >
     Collect recent news articles about {topic} from NewsAPI, GDELT, and MediaStack.
     First, check the cache using get_cached_news. If fresh cached data exists, use it.
     Otherwise, fetch from external APIs using news_fetcher, then cache the results.
     Gather at least 50-100 articles from diverse sources to ensure comprehensive coverage.
     Include metadata: source name, publication date, URL, and any sentiment data.
  expected_output: >
    A structured collection of news articles with titles, descriptions, URLs, sources,
    and publication dates from all three APIs (NewsAPI, GDELT, MediaStack).
  agent: collector_agent

persist_collection_task:
  description: >
    Store the collected articles about {topic} in a local storage layer (SQLite database).
    Use the save_news tool to persist each article with topic, source, title, url, description, and publication date.
  expected_output: >
    A confirmation message indicating how many articles were successfully stored for {topic}.
  agent: storage_agent
  context:
    - collection_task

summarization_task:
  description: >
    Extract key facts from the collected articles about {topic}.
    Focus on: verifiable facts, data points, direct quotes, events, dates, and names.
    Remove opinions, speculation, and emotional language.
  expected_output: >
    A factual summary with bullet points of core information extracted from all sources.
  agent: summarizer_agent
  context:
    - collection_task

bias_detection_task:
  description: >
    Analyze the collected articles and summaries for bias, sentiment and emotional tone.
    Identify: political leaning, emotional language, source bias, loaded terms and framing.
    Rate sentiment (positive/negative/neutral) and bias level (low/medium/high).
  expected_output: >
    A bias analysis report with specific examples of biased language, sentiment scores, and identified patterns across sources.
  agent: bias_detector_agent
  context:
    - collection_task
    - summarization_task      

neutralization_task:
  description: >
    Rewrite biased, politically charged, or emotional content about {topic} using neutral language.
    Replace loaded terms, balance one-sided narratives, remove emotional manipulation.
    Preserve all facts and represent multiple perspectives fairly.
  expected_output: >
    Neutralized version of the news content with balanced language and fair representation of all viewpoints while maintaining factual accuracy.
  agent: stance_equalizer_agent
  context:
    - summarization_task
    - bias_detection_task

reporting_task:
  description: >
    Create a comprehensive, well-formatted daily news digest about {topic} that synthesizes all collected information, summaries and neutralized content.
    
    Use this EXACT markdown structure for maximum readability:
    
    # [Compelling Headline]
    
    ---
    
    ## ðŸ“Š Executive Summary
    Brief 2-3 sentence overview of the main story
    
    ## ðŸ”‘ Key Facts
    - **Location:** Where it happened
    - **Date:** When it happened
    - **Impact:** Key numbers, statistics, casualties (if applicable)
    - **Status:** Current situation
    - **Response:** Actions being taken
    
    ---
    
    ## ðŸ“° The Story
    
    ### What Happened
    Detailed narrative of events in clear paragraphs
    
    ### Why It Matters
    Context and significance
    
    ### What's Next
    Future developments and expectations
    
    ---
    
    ## ðŸ—£ï¸ Multiple Perspectives
    
    ### Government/Official Response
    - What authorities are saying and doing
    
    ### Affected Communities
    - Impact on people on the ground
    
    ### Expert Analysis
    - Professional/technical viewpoints
    
    ### International Reaction
    - Global response and assistance
    
    ---
    
    ## ðŸŒ Broader Context
    Historical background, related events, long-term implications
    
    ---
    
    ## ðŸ“š Sources
    List all sources used with proper attribution
    
    ---
    
    *Report compiled from multiple verified news sources â€¢ Last updated: [Date/Time]*
    
  expected_output: >
    A professionally formatted, visually appealing markdown news digest (800-1200 words) with:
    - Clear hierarchical headings (H1, H2, H3)
    - Emoji icons for visual navigation
    - Bullet points and numbered lists for readability
    - Bold text for emphasis on key terms
    - Horizontal rules (---) to separate major sections
    - Proper citation of all sources
    - Neutral, balanced tone presenting all perspectives fairly
  agent: reporter_agent
  context:
    - collection_task
    - summarization_task
    - bias_detection_task
    - neutralization_task
  output_file: 'news_digest_{topic}.md'
